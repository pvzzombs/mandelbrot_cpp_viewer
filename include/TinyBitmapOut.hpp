/*
    TinyBitmapOut.hpp - Source file for Bitmap Manipulation
    Part of mandelbrot viewer made in C++ using SFML library
    LICENSE: GNU Lesser General Public License v3.0
*/

#pragma once

#include <fstream>
#include <iostream>

class rgb {
public:
    int r, g, b, a;
////////////////////////////////////////////////////////////
/// \brief Default constructor of rgb class
///
/// \warning Brief This initializes alpha to 255!
///
////////////////////////////////////////////////////////////
    rgb();
////////////////////////////////////////////////////////////
/// \brief Constructor of rgb class
///
/// \param w Red value
/// \param q Green Value
/// \param c Blue Value
///
////////////////////////////////////////////////////////////
    rgb(int w, int q, int c);
////////////////////////////////////////////////////////////
/// \brief Constructor of rgb class
///
/// \param w Red Value
/// \param q Green Value
/// \param c Blue Value
/// \param d Alpha Value
///
////////////////////////////////////////////////////////////
    rgb(int w, int q, int c, int d);
};

class TinyBitmapOut {
    int* data;
    bool is_data;
    int area;
    unsigned int width;
    unsigned int height;
    std::string path_to_file;
    void init(unsigned int w, unsigned int h, std::string path);
    void save(std::string path);

public:
////////////////////////////////////////////////////////////
/// \brief Default constructor of class TinyBitmapOut
///
////////////////////////////////////////////////////////////
    TinyBitmapOut();
////////////////////////////////////////////////////////////
/// \brief Constructor of class TinyBitmapOut
///
/// \param w Width of the bitmap
/// \param h Height of the bitmap
/// \param path Path to where the bitmap will be saved
///
////////////////////////////////////////////////////////////
    TinyBitmapOut(unsigned int w, unsigned int h, std::string path);
////////////////////////////////////////////////////////////
/// \brief Changes the width, height and path of the bitmap file
///
/// \param w Width of the bitmap
/// \param h Height of the bitmap
/// \param path Path to where the bitmap will be saved
///
////////////////////////////////////////////////////////////
    void change_settings(unsigned int w, unsigned int h, std::string path);
////////////////////////////////////////////////////////////
/// \brief Writes the data of the bitmap file
///
/// \param DATA The data of the bitmap in form rgb class array
///
////////////////////////////////////////////////////////////
    void write_data(rgb * DATA);
////////////////////////////////////////////////////////////
/// \brief Writes the data of the bitmap file
///
/// \param DATA The data of the bitmap in form int class array
///
////////////////////////////////////////////////////////////
    void write_data(int * DATA);
////////////////////////////////////////////////////////////
/// \brief Reverses the data in the bitmap file
///
////////////////////////////////////////////////////////////
    void reverse_data();
////////////////////////////////////////////////////////////
/// \brief Flips the data of the bitmap file horizontally
///
////////////////////////////////////////////////////////////
    void flip_data_horizontal();
////////////////////////////////////////////////////////////
/// \brief Flips the data of the bitmap file vertically
///
////////////////////////////////////////////////////////////
    void flip_data_vertical();
////////////////////////////////////////////////////////////
/// \brief Save the bitmap file
///
////////////////////////////////////////////////////////////
    void save_data();
////////////////////////////////////////////////////////////
/// \brief Save the bitmap file
///
/// \param path Saves the bitmap file to the given path
/// rather than the original path
///
////////////////////////////////////////////////////////////
    void save_data(std::string path);
////////////////////////////////////////////////////////////
/// \brief Deletes and releases all the allocated memory
/// of the bitmap file
///
/// \warning If you used write_data(int * DATA), you do not
/// need to delete the pointer array you pass to write_data
/// everything is handled by this library automatically :-)
///
////////////////////////////////////////////////////////////
    void delete_data();
    ~TinyBitmapOut();
};
